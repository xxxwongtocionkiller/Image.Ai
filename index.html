<!-- File: darkx-wa-bot.html -->
<!doctype html>
<html lang="sw">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DarkX WA Bot - Free Deployment Panel</title>
  <style>
    :root{
      --bg:#f6f8fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#1f7ed0;
      --success:#10b981;
      --danger:#ef4444;
      --cmatrix-green: #0b3b0b;
      --cmatrix-char: rgba(16,185,129,0.12);
    }
    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{
      margin:0;
      background: linear-gradient(180deg,#e6f0ff 0%, #ffffff 100%);
      color:#0f172a;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
    }

    .container{
      width:100%;
      max-width:880px;
      background:var(--card);
      border-radius:12px;
      box-shadow: 0 12px 30px rgba(15,23,42,0.08);
      padding:28px;
    }

    .header{
      display:flex;
      align-items:center;
      gap:16px;
    }
    .logo{
      width:64px;height:64px;border-radius:10px;
      background:linear-gradient(135deg,var(--accent),#6dd3ff);
      display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:18px;
      box-shadow: 0 6px 16px rgba(31,126,208,0.18);
    }
    h1{margin:0;font-size:20px}
    p.lead{margin:6px 0 0;color:var(--muted)}

    .grid{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:20px;
      margin-top:20px;
    }

    /* Left panel */
    .panel{
      background: linear-gradient(180deg,#ffffff,#f8fafc);
      border-radius:10px;
      padding:18px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }

    label{display:block;font-weight:600;margin-bottom:6px}
    .input-row{margin-bottom:14px}

    /* Cmatrix input wrapper */
    .cmatrix-wrap{
      position:relative;
      border-radius:10px;
      overflow:hidden;
      background: linear-gradient(180deg,#e9f6ea,#ffffff);
      border:1px solid rgba(6,95,70,0.06);
      min-height:72px;
      display:flex;
      align-items:center;
      padding:12px;
    }
    /* Cmatrix canvas-like effect using pseudo elements and animation */
    .cmatrix-bg{
      position:absolute;inset:0;pointer-events:none;mix-blend-mode:normal;
      background:
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    }
    /* falling characters via repeated background image created with CSS gradients */
    .cmatrix-bg:before{
      content:"";
      position:absolute;inset:0;
      background-image: 
        radial-gradient(circle at 10% 10%, var(--cmatrix-char) 0 1px, transparent 1px),
        radial-gradient(circle at 30% 30%, var(--cmatrix-char) 0 1px, transparent 1px),
        radial-gradient(circle at 70% 60%, var(--cmatrix-char) 0 1px, transparent 1px);
      opacity:0.9;
      animation: drift 6s linear infinite;
      filter: blur(0.5px);
      mix-blend-mode: multiply;
    }
    @keyframes drift{
      0%{transform:translateY(-10%) }
      100%{transform:translateY(110%) }
    }

    input[type="tel"]{
      border:0;background:transparent;outline:none;font-size:18px;width:100%;
      padding:6px 8px;color:#05263b;font-weight:600;
    }
    .muted{color:var(--muted);font-size:13px;margin-top:6px}

    .small{font-size:13px;color:var(--muted);}

    .question{
      display:flex;gap:12px;align-items:center;
    }

    .btn{
      display:inline-block;padding:10px 14px;border-radius:8px;border:0;cursor:pointer;font-weight:700;
      background:var(--accent);color:white;
      box-shadow: 0 6px 18px rgba(31,126,208,0.18);
    }
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(31,126,208,0.12);box-shadow:none}
    .btn.warn{background:var(--danger)}
    .btn.success{background:var(--success)}
    .btn:disabled{opacity:0.5;cursor:not-allowed;box-shadow:none}

    /* Right panel */
    .side{
      padding:14px;border-radius:10px;background:linear-gradient(180deg,#fbfbff,#ffffff);box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }
    .card-row{display:flex;flex-direction:column;gap:10px}
    .info{font-size:14px;color:#0f172a}
    .notice{background: #fff7ed;border-left:4px solid #f59e0b;padding:10px;border-radius:8px;color:#92400e}

    .status{
      margin-top:12px;padding:12px;border-radius:8px;background:#f1f5f9;font-size:14px;color:#0f172a;
    }

    .pair-code{
      margin-top:12px;padding:12px;border-radius:8px;background:linear-gradient(90deg,#f8fafc,#ffffff);
      font-family:monospace;font-size:18px;
      display:flex;align-items:center;justify-content:space-between;gap:8px;
    }

    .share-area{margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .badge{font-weight:700;padding:8px 10px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:13px}

    .footer{margin-top:18px;font-size:13px;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
    .small-muted{color:var(--muted);font-size:13px}

    /* responsive */
    @media (max-width:880px){
      .grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="container" role="main" aria-label="DarkX WA Bot - Free Deployment Panel">
    <div class="header">
      <div class="logo">DX</div>
      <div>
        <h1>DarkX WA Bot</h1>
        <p class="lead">Free Deployment Panel — Tafadhali jisajili kabla ya kutumia bot yetu.</p>
      </div>
    </div>

    <div class="grid" aria-hidden="false">
      <div class="panel" id="leftPanel">
        <div class="input-row">
          <label for="phone">Namba ya WhatsApp</label>
          <div class="cmatrix-wrap" title="Input area with cmatrix-like background">
            <div class="cmatrix-bg" aria-hidden="true"></div>
            <input id="phone" type="tel" placeholder="+2557xxxxxxx" aria-label="WhatsApp number"/>
          </div>
          <div class="muted">Andika namba kamili ikiwa na country code. Mfano: <strong>+255712345678</strong></div>
        </div>

        <div class="input-row">
          <label for="qans">Jibu swali la kujumlisha</label>
          <div class="question">
            <div id="mathQuestion" style="font-weight:700;font-size:18px"></div>
            <input id="qans" type="text" placeholder="Andika jibu hapa" style="padding:8px;border:1px solid #e6eef8;border-radius:8px; flex:0 0 120px"/>
          </div>
          <div class="small muted">Lengo: kuthibitisha hauko bot.</div>
        </div>

        <div style="display:flex;gap:8px;align-items:center;margin-top:6px;">
          <button id="generateBtn" class="btn">Generate Pair Code</button>
          <button id="resetBtn" class="btn ghost">Reset</button>
        </div>

        <div style="margin-top:12px;">
          <div class="notice">
            <strong>Tahadhari:</strong> Tafadhali <em>registered before using our bot</em>. Kwanza bsutton ya <strong>Generate Pair Code</strong> itakupa ujumbe wa usajili ikiwa bado hujasajili.
          </div>
        </div>

        <div style="margin-top:14px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <a id="joinBtn" class="btn ghost" href="https://chat.whatsapp.com/LQinetqNbGl6aYknRw3LfX?mode=ems_copy_t" target="_blank" rel="noopener">Join our Group</a>
          <button id="joinedConfirm" class="btn" style="display:none">Nimejiunga (Confirm)</button>
          <div id="joinNotice" class="small-muted" style="margin-left:10px;">Link ya group imewekwa kwenye button</div>
        </div>

        <div id="sharePanel" style="margin-top:12px;display:none">
          <label>Weka ume-share link kwa watu (Required: 20)</label>
          <div class="share-area">
            <div class="badge" id="shareCount">0 / 20</div>
            <button id="shareBtn" class="btn ghost">Share Link</button>
            <button id="autoShareBtn" class="btn ghost" title="For testing: simulate share 20x">Simulate x20</button>
            <div class="small-muted">Hakuna sharing ya kweli — hii ni verification ya deployment (fake counter)</div>
          </div>
        </div>

        <div id="backPanel" style="margin-top:16px;display:none">
          <label>Back (X) button — ili kurudi nyuma lazima ubonyeze mara <strong>100</strong></label>
          <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
            <button id="backBtn" class="btn ghost" disabled>X - Back</button>
            <div class="badge" id="backCount">0 / 100</div>
            <div class="small-muted">Bonyeza mara 100 ili usonge nyuma.</div>
          </div>
        </div>

      </div>

      <aside class="side">
        <div class="card-row">
          <div>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <div style="font-weight:800">Status</div>
                <div class="small-muted">Hapa utaona maendeleo ya usajili</div>
              </div>
              <div id="statusDot" style="font-weight:800;color:var(--muted)">● Not Registered</div>
            </div>
          </div>

          <div class="status" id="statusBox">Tayari: Hakuna shughuli. Tafadhali ingiza namba na jibu swali halafu bonyeza <strong>Generate Pair Code</strong>.</div>

          <div id="pairArea" style="display:none">
            <div class="pair-code" id="pairBox">
              <span id="pairText">PAIR-XXXX-XXXX</span>
              <div style="display:flex;gap:6px">
                <button id="copyPair" class="btn ghost">Copy</button>
                <button id="resetPair" class="btn ghost">Reset</button>
              </div>
            </div>
          </div>

          <div style="margin-top:8px">
            <div style="font-weight:700">Free Deployment Panel</div>
            <div class="small-muted">DarkX WA Bot - Hakikisha umefanya hatua zote kabla ya kutumia code.</div>
          </div>

          <div style="margin-top:10px">
            <div style="font-weight:700">Actions</div>
            <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
              <button id="helpBtn" class="btn ghost">User Guide</button>
              <button id="termsBtn" class="btn ghost">Terms</button>
            </div>
          </div>

          <div style="margin-top:12px" class="small-muted">
            <strong>Note:</strong> Hii ni simulation ya deployment panel. Hatuna uwezo wa kuthibitisha join halisi ya WhatsApp group kupitia client-side.
          </div>

        </div>

        <div class="footer">
          <div>By DarkX</div>
          <div class="small-muted">Free Deployment Panel</div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // ====== Initial variables ======
    const phone = document.getElementById('phone');
    const qans = document.getElementById('qans');
    const mathQuestion = document.getElementById('mathQuestion');
    const generateBtn = document.getElementById('generateBtn');
    const statusDot = document.getElementById('statusDot');
    const statusBox = document.getElementById('statusBox');
    const joinBtn = document.getElementById('joinBtn');
    const joinedConfirm = document.getElementById('joinedConfirm');
    const sharePanel = document.getElementById('sharePanel');
    const shareBtn = document.getElementById('shareBtn');
    const shareCountBadge = document.getElementById('shareCount');
    const autoShareBtn = document.getElementById('autoShareBtn');
    const pairArea = document.getElementById('pairArea');
    const pairText = document.getElementById('pairText');
    const copyPair = document.getElementById('copyPair');
    const resetPair = document.getElementById('resetPair');
    const pairBox = document.getElementById('pairBox');
    const backPanel = document.getElementById('backPanel');
    const backBtn = document.getElementById('backBtn');
    const backCountBadge = document.getElementById('backCount');
    const joinedKey = 'darkx_joined_v1';
    const sharesKey = 'darkx_shares_v1';
    const backKey = 'darkx_back_v1';
    const registeredKey = 'darkx_registered_v1';

    // ====== Generate simple math question ======
    let a = 0, b = 0, answer = 0;
    function newQuestion(){
      a = Math.floor(Math.random()*9) + 1; //1..9
      b = Math.floor(Math.random()*9) + 1;
      answer = a + b;
      mathQuestion.textContent = `${a} + ${b} = ?`;
      qans.value = '';
    }
    newQuestion();

    // ====== Utility: validate phone (simple) ======
    function validatePhone(val){
      // require + and digits, length between 10 and 16
      const re = /^\+\d{9,15}$/;
      return re.test(val.trim());
    }

    // ====== Generate Pair Code (when allowed) ======
    function makePair(){
      // generate random 4-4
      const p1 = Math.random().toString(36).substring(2,6).toUpperCase();
      const p2 = Math.random().toString(36).substring(2,6).toUpperCase();
      return `PAIR-${p1}-${p2}`;
    }

    // ====== Event: Generate Button ======
    generateBtn.addEventListener('click', () => {
      const phoneVal = phone.value.trim();
      const qVal = qans.value.trim();

      if(!validatePhone(phoneVal)){
        statusBox.textContent = 'Tafadhali ingiza namba sahihi (ikiwa na +countrycode). Mfano: +255712345678';
        statusDot.textContent = '● Invalid Number';
        return;
      }
      if(String(answer) !== qVal){
        statusBox.textContent = 'Jibu la swali la kujumlisha sio sahihi. Tafadhali jaribu tena.';
        statusDot.textContent = '● Verification Failed';
        return;
      }

      // If not registered (joined & shared 20) -> show message to register
      const joined = localStorage.getItem(joinedKey) === 'true';
      const shares = parseInt(localStorage.getItem(sharesKey) || '0', 10);

      if(!joined || shares < 20){
        statusBox.innerHTML = '<strong>Please register before using our bot.</strong> Tafadhali jiunge group kwanza kisha share link kwa 20 people.<br/><br/>' +
          '<em>Click "Join our Group" na kisha bonyeza "Nimejiunga (Confirm)" baada ya kujiunga.</em>';
        statusDot.textContent = '● Not Registered';
        // ensure join controls visible
        joinedConfirm.style.display = 'inline-block';
        sharePanel.style.display = joined ? 'block' : 'none';
        return;
      }

      // All good - generate pair code
      const code = makePair();
      pairText.textContent = code;
      pairArea.style.display = 'block';
      statusBox.textContent = `Pair code imetengenezwa: ${code}. Hifadhi kwa uangalifu.`;
      statusDot.textContent = '● Registered';
      localStorage.setItem(registeredKey, 'true');
      // show back panel unlocking
      backPanel.style.display = 'block';
      backBtn.disabled = false;
    });

    // ====== Reset button ======
    resetBtn.addEventListener('click', () => {
      phone.value = '';
      qans.value = '';
      newQuestion();
      statusBox.textContent = 'Reset imefanyika. Weka namba na jibu swali tena.';
      pairArea.style.display = 'none';
      statusDot.textContent = '● Not Registered';
    });

    // ====== Join confirm button (user clicks after they joined group) ======
    joinedConfirm.addEventListener('click', () => {
      // mark joined
      localStorage.setItem(joinedKey, 'true');
      joinedConfirm.style.display = 'none';
      sharePanel.style.display = 'block';
      statusBox.textContent = 'Umejiunga. Sasa share link kwa 20 watu ili kuendelea.';
      statusDot.textContent = '● Joined (needs shares)';
      // init share count
      if(!localStorage.getItem(sharesKey)) localStorage.setItem(sharesKey, '0');
      updateShareUI();
    });

    // ====== Share button (fake counter) ======
    function updateShareUI(){
      const shares = parseInt(localStorage.getItem(sharesKey) || '0',10);
      shareCountBadge.textContent = `${shares} / 20`;
      if(shares >= 20){
        statusBox.textContent = 'Umefanikiwa kushare link 20x. Sasa unaweza kubonyeza Generate Pair Code tena.';
        statusDot.textContent = '● Shares Done';
        // allow generate
        generateBtn.disabled = false;
        // show back panel
        backPanel.style.display = 'block';
      } else {
        generateBtn.disabled = false; // still allow clicking generate (it will remind to register)
      }
    }

    shareBtn.addEventListener('click', () => {
      // simulate a share: increment by 1
      let shares = parseInt(localStorage.getItem(sharesKey) || '0',10);
      if(shares >= 20) return;
      shares += 1;
      localStorage.setItem(sharesKey, String(shares));
      updateShareUI();
      // small feedback
      statusBox.textContent = `Share imefanywa (${shares}/20). Endelea mpaka 20.`;
    });

    // convenience: simulate 20 shares (for testing)
    autoShareBtn.addEventListener('click', () => {
      localStorage.setItem(sharesKey, '20');
      updateShareUI();
    });

    // ====== Pair copy & reset ======
    copyPair.addEventListener('click', async () => {
      const text = pairText.textContent;
      try {
        await navigator.clipboard.writeText(text);
        statusBox.textContent = 'Pair code imekopiwa kwenye clipboard.';
      } catch(e){
        statusBox.textContent = 'Haiwezi ku-copy moja kwa moja. Nakupa code: ' + text;
      }
    });
    resetPair.addEventListener('click', () => {
      pairArea.style.display = 'none';
      localStorage.removeItem(registeredKey);
      statusBox.textContent = 'Pair code ime-reset.';
      newQuestion();
    });

    // ====== Back button requiring 100 presses ======
    function updateBackUI(){
      const bcount = parseInt(localStorage.getItem(backKey) || '0',10);
      backCountBadge.textContent = `${bcount} / 100`;
      if(bcount >= 100){
        backBtn.textContent = 'X - Back (Unlocked)';
        backBtn.classList.remove('ghost');
        backBtn.classList.add('success');
        backBtn.disabled = false;
      } else {
        backBtn.textContent = 'X - Back';
        backBtn.disabled = false; // allow presses
      }
    }

    backBtn.addEventListener('click', () => {
      let cnt = parseInt(localStorage.getItem(backKey) || '0',10);
      if(cnt >= 100){
        // already unlocked -> go back action
        statusBox.textContent = 'Umerudi nyuma. (Action simulated).';
        // reset certain states for demonstration
        localStorage.removeItem(joinedKey);
        localStorage.removeItem(sharesKey);
        localStorage.removeItem(backKey);
        localStorage.removeItem(registeredKey);
        sharePanel.style.display = 'none';
        backPanel.style.display = 'none';
        pairArea.style.display = 'none';
        statusDot.textContent = '● Not Registered';
        statusBox.textContent = 'Umerudi nyuma kufanikiwa. Tafadhali anza tena ikiwa unataka.';
        return;
      } else {
        cnt += 1;
        localStorage.setItem(backKey, String(cnt));
        updateBackUI();
        statusBox.textContent = `Umebonyeza back ${cnt}/100. Endelea hadi ufikie 100.`;
      }
    });

    // init back UI
    updateBackUI();

    // ====== On page load: restore states ======
    window.addEventListener('load', () => {
      // if previously joined
      const joined = localStorage.getItem(joinedKey) === 'true';
      if(joined){
        joinedConfirm.style.display = 'none';
        sharePanel.style.display = 'block';
      }
      updateShareUI();
      // show pair if generated before
      if(localStorage.getItem(registeredKey) === 'true'){
        pairArea.style.display = 'block';
        statusDot.textContent = '● Registered';
      }
    });

    // ====== Help & Terms simple handlers ======
    document.getElementById('helpBtn').addEventListener('click', () => {
      alert("User Guide:\\n1) Ingiza namba yako ya WhatsApp.\\n2) Jibu swali la kujumlisha.\\n3) Bonyeza Generate Pair Code.\\n4) Kama haujasajili, jiunge group na bonyeza 'Nimejiunga'.\\n5) Share link kwa watu 20 (fake counter).\\n6) Baada ya 20, bonyeza Generate tena ili kupata pair code.\\n7) Ili kurudi nyuma bonyeza X mara 100.");
    });
    document.getElementById('termsBtn').addEventListener('click', () => {
      alert("Terms: Hii ni simulation ya deployment panel. DarkX si kampuni ya kuhusiana na usajili halisi wa group. Usitoshe mtumie data ya watu bila idhini.");
    });

  </script>
</body>
</html>
